四、数据库基础
15. 关系型数据库和非关系型数据库有哪些区别？举例说
明
关系型数据库，是指采用了关系模型来组织数据的数据库，其以⾏和
列的形式存储数据，以便于用户理解，关系型数据库这⼀系列的⾏和列被
称为表，⼀组表组成了数据库。用户通过查询来检索数据库中的数据，⽽
查询是⼀个用于限定数据库中某些区域的执⾏代码。关系模型可以简单理
解为⼆维表格模型，⽽⼀个关系型数据库就是由⼆维表及其之间的关系组
成的⼀个数据组织。例如：mysql、oracle、sql server
NoSQL，泛指非关系型的数据库。随着互联⽹web2.0⽹站的兴起，传
统的关系数据库在处理web2.0⽹站，特别是超⼤规模和⾼并发的SNS类型
的web2.0纯动态⽹站已经显得⼒不从⼼，出现了很多难以克服的问题，⽽
非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSQL数
抖音/公众号：老猿说开发 15
JAVA开发基础知识 V5.3
据库的产⽣就是为了解决⼤规模数据集合多重数据种类带来的挑战，尤其
是⼤数据应用难题。例如：redis
16. 数据库索引是做什么用的？
在关系数据库中，索引是⼀种单独的、物理的对数据库表中⼀列或多
列的值进⾏排序的⼀种存储结构，它是某个表中⼀列或若⼲列值的集合和
相应的指向表中物理标识这些值的数据页的逻辑指针清单。索引的作用相
当于图书的目录，可以根据目录中的页码快速找到所需的内容。
17. 什么情况需要给字段建立索引？
表的主键、外键必须有索引；
数据量超过300的表应该有索引；
经常与其他表进连接的表，在连接字段上应该建索引；
经常出现在Where句 order by中的字段，特别是表的字段，应该建索
引；
索引应该建在选择性的字段上；
索引应该建在字段上，对于的本字段甚超字段，不要建索引；
18. 什么情况下索引会失效？
1.单独引用复合索引里非第⼀位置的索引列
假如有INDEX(a,b,c)，
当条件为a或a,b或a,b,c时都可以使用索引，
但是当条件为b,c时将不会使用索引。

JAVA开发基础知识 V5.3
复合索引遵守“最左前缀”原则，即在查询条件中使用了复合索引的第
⼀个字段，索引才会被使用。因此，在复合索引中索引列的顺序⾄关重
要。如果不是按照索引的最左列开始查找，则⽆法使用索引。
2.对索引列运算，运算包括（+、-、*、/、！、、%、like’%_’（%放
在前面）、or、in、exist等），导致索引失效。
错误的例⼦：select * from test where id-1=9;
正确的例⼦：select * from test where id=10;
注意！！
mysql sql 中如果使用了 not in ， not exists ， （ 不等于 ！=） 这些不
⾛
< 小于 > ⼤于 = 这个根据实际查询数据来判断，如果全盘扫描速度
比索引速度要快则不⾛索引 。
3.对索引应用内部函数，这种情况下应该建立基于函数的索引。
select * from template t where ROUND(t.logicdb_id) = 1
此时应该建ROUND(t.logicdb_id)为索引。
4、类型错误，如字段类型为varchar，where条件用number。
例：template_id字段是varchar类型。
错误写法：select * from template t where t.template_id = 1
正确写法：select * from template t where t.template_id = ‘1’
5.如果MySQL预计使用全表扫描要比使用索引快，则不使用索引
6.like的模糊查询以%开头，索引失效
7.索引列没有限制 not null，索引不存储空值，如果不限制索引列是
not null，oracle会认为索引列有可能存在空值，所以不会按照索引计算
19. 慢查询是什么？

JAVA开发基础知识 V5.3
分析MySQL语句查询性能的⽅法除了使用 EXPLAIN 输出执⾏计划，
还可以让MySQL记录下查询超过指定时间的语句，我们将超过指定时间
的SQL语句查询称为“慢查询”。
20. 主从库是什么？
1、做数据的热备，作为后备数据库，主数据库服务器故障后，可切
换到从数据库继续⼯作，避免数据丢失。
2、架构的扩展。业务量越来越⼤，I/O访问频率过⾼，单机⽆法满
⾜，此时做多库的存储，降低磁盘I/O访问的频率，提⾼单个机器的I/O
性能。
3、读写分离，使数据库能支撑更⼤的并发。在报表中尤其重要。由
于部分报表sql语句非常的慢，导致锁表，影响前台服务。如果前台使用
master，报表使用slave，那么报表sql将不会造成前台锁，保证了前台速
度。